// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;a="192.168.2.35";f="kellishaver";l=null;e=$("body");v=$("#screen");g=$("header h1");t=$("#bulbs-tpl").html();n=$("#dashboard-tpl").html();o=$("#effects-tpl").html();u=$("#favorites-tpl").html();r={alert:"none",hue:14922,effect:"none",sat:60,bri:254,on:!0};i=function(e,t,n){var r;n==="light"?r="http://"+a+"/api"+f+"/lights/"+e+"/state":n==="group"&&(r="http://"+a+"/api"+f+"/groups/"+e+"/action");return $.ajax(r,{type:"GET",dataType:"JSON",type:"PUT",data:JSON.stringify(t),queue:!0})};m=function(e){var t;t=$(e);return t.parent().toggleClass("on")};c=function(){var e;document.getElementById("screen").innerHTML="";e={lights:[]};v.html(Mark.up(t,l));return g.text("Bulb Controls")};h=function(){var e;document.getElementById("screen").innerHTML="";if(l===null){e={lights:[]};$.getJSON("http://"+a+"/api"+f+"/lights",function(t){var r,i;for(r in t){i=t[r];e.lights.push({id:r,name:i.name,state:{}})}l=e;return v.html(Mark.up(n,e))})}else v.html(Mark.up(n,l));return g.text("Hue Control Panel")};p=function(){document.getElementById("screen").innerHTML="";v.html(Mark.up(o,l));return g.text("Special Effects")};d=function(){var e;document.getElementById("screen").innerHTML="";e={favorites:[]};v.html(Mark.up(u));return g.text("Favorites")};s=function(e){var t,n,s,o;t=$(".bulb-select");o=$("li.on");s=Math.floor(Math.random()*65536);if(o.length!==t.length)return o.each(function(){var t;t=$("a",this).data("id");if(e==="cleareffects")return i(t,r,"light");if(e==="colorloop"){n=$(".color-loop");n.toggleClass("is-on");return n.hasClass("is-on")?i(t,{effect:"colorloop"},"light"):i(t,{effect:"none"},"light")}if(e==="flash30")return i(t,{alert:"lselect"},"light");if(e==="flashonce")return i(t,{alert:"select"},"light");if(e==="randomcolor")return i(t,{hue:s},"light")});if(e==="cleareffects")return i(0,r,"group");if(e==="colorloop"){n=$(".color-loop");n.toggleClass("is-on");return n.hasClass("is-on")?i(0,{effect:"colorloop"},"group"):i(0,{effect:"none"},"group")}if(e==="flash30")return i(0,{alert:"lselect"},"group");if(e==="flashonce")return i(0,{alert:"select"},"group");if(e==="randomcolor")return i(0,{hue:s},"group")};y=function(e){return i(e,r,"light")};b=function(){return i(0,r,"group")};w=function(e){return i(e,{on:!1},"light")};E=function(){return i(0,{on:!1},"group")};S=function(e){return i(e,{on:!0},"light")};x=function(){return i(0,{on:!0},"group")};jQuery(function(){e.on("click","a",function(e){return e.preventDefault()}).on("mousedown","a, button",function(){return $(this).addClass("touched")}).on("mouseup","a, button",function(){return $(this).removeClass("touched")}).on("click",".bulb-select",function(){return m(this)}).on("click",".bulbs",function(){return c()}).on("click",".dashboard",function(){return h()}).on("click",".effects",function(){return p()}).on("click",".favorites",function(){return d()}).on("click",".turn-default",function(){return y($(this).data("id"))}).on("click",".turn-off",function(){return w($(this).data("id"))}).on("click",".turn-on",function(){return S($(this).data("id"))}).on("click",".all-default",function(){return b()}).on("click",".all-off",function(){return E()}).on("click",".all-on",function(){return x()}).on("click",".clear-effects",function(){return s("cleareffects")}).on("click",".color-loop",function(){return s("colorloop")}).on("click",".flash-30",function(){return s("flash30")}).on("click",".flash-once",function(){return s("flashonce")}).on("click",".random-color",function(){return s("randomcolor")});return h()})}).call(this);